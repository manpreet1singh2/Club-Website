<!DOCTYPE html>
<html>
<head>
	<title>The Night Crew | Reservations</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Cinzel+Decorative|Megrim|Orbitron:700" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<meta charset="UTF-8">
	<!-- QR Code JS Library -->
	<script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap 5 CSS -->
  
	<!-- QR Code JS Library -->
	<script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>
  </head>
<body class="bck background">
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
      			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
      				<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
      			</button>
      			<h1 class="logo" ><a href="index.html" class="navbar-brand normal">The <span>Night</span>Crew</a></h1>
    		</div>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">		
			<ul class="nav navbar-nav">
				<li><a href="index.html">Home</a></li>
				<li><a href="music.html">Music</a></li>
				<li><a href="events.html">Events</a></li>
				<li><a href="bar.html">Bar</a></li>
				<li><a href="wilder.html">Night Crew</a></li>
				<li><a href="Gallery.html">Gallery</a></li>
			</ul>
		</div>
	</nav>

	<div class="container">
		<div class="jumbotron">
			<H2>Make a reservation for your squad</H2>
		</div>
		<div class="row">
	    	<div class="col-xs-12 ">
	        	<div class="reservation">
	        		<article>
	        			<div id="errorText"></div>
			        	<form id="qrForm" action="results.html">
			        		<fieldset class="form-group">
			        			<label for="inputData" for="fname">First Name: </label>
			        			<input type="text" name="firstname" id="fname" placeholder="First Name" required>
			        		</fieldset>

			        		<fieldset class="form-group">
			        			<label for="inputData" for="inputData" for="lname">Last Name: </label>
			        			<input type="text" name="lastname" id="lname" placeholder="Last Name" required>
			        			<div class="errorMessage"></div>
			        		</fieldset>

			        		<fieldset class="form-group" required>
			        			<label for="inputData" for="phone">Phone:</label>
			        			<input type="number" name="phone" id="phone" placeholder="enter phone number" min="1111111111" required>
			        		</fieldset>

				        	<fieldset id="reservationDate" class="checks form-group">
					            <label for="inputData" >Reservation Date</label>
					            <div class="inline" id="reserveDate">
					               <select id="reserveMo" name="ReserveMonth" required>
					                  <option value="1">January</option>
					                  <option value="2">February</option>
					                  <option value="3">March</option>
					                  <option value="4">April</option>
					                  <option value="5">May</option>
					                  <option value="6">June</option>
					                  <option value="7">July</option>
					                  <option value="8">August</option>
					                  <option value="9">September</option>
					                  <option value="10">October</option>
					                  <option value="11">November</option>
					                  <option value="12">December</option>
					               </select>
					               <select id="reserveDy" name="ReserveDay" required="required">
					                  <option value="1">1</option>
					                  <option value="2">2</option>
					                  <option value="3">3</option>
					                  <option value="4">4</option>
					                  <option value="5">5</option>
					                  <option value="6">6</option>
					                  <option value="7">7</option>
					                  <option value="8">8</option>
					                  <option value="9">9</option>
					                  <option value="10">10</option>
					                  <option value="11">11</option>
					                  <option value="12">12</option>
					                  <option value="13">13</option>
					                  <option value="14">14</option>
					                  <option value="15">15</option>
					                  <option value="16">16</option>
					                  <option value="17">17</option>
					                  <option value="18">18</option>
					                  <option value="19">19</option>
					                  <option value="20">20</option>
					                  <option value="21">21</option>
					                  <option value="22">22</option>
					                  <option value="23">23</option>
					                  <option value="24">24</option>
					                  <option value="25">25</option>
					                  <option value="26">26</option>
					                  <option value="27">27</option>
					                  <option value="28">28</option>
					                  <option value="29">29</option>
					                  <option value="30">30</option>
					                  <option value="31">31</option>
					               </select>
					               <select id="reserveYr" name="Reserveyear" required="required">
					                  <option value="2017">2017</option>
					                  <option value="2018">2018</option>
					                  <option value="2019">2019</option>
					                  <option value="2020">2020</option>
					               </select>
					            </div>
					            <div class="errorMessage"></div>
					         </fieldset>
				        		
			        		
			        		<fieldset class="form-group">
				        		<label for="inputData" for="inputData" for="occasion">Occasion:</label>
				        		<select name="occasion" id="occasion" required>
			  						<option value="birthday">Birthday</option>
			  						<option value="holiday">Holiday</option>
			  						<option value="promotion">Job Promotion</option>
			  						<option value="anniversary">Anniversary</option>
			  						<option value="graduation">Graduation</option>
			  						<option value="marriage">Marriage/Engagement</option>
			  						<option value="wild">Wild Time</option> 
								</select>
							</fieldset>

							<div class="form-group">
								<label for="inputData" for="party-size" >Party Size:</label>
								<input type="number" name="party-size" id="party-size" min="1" required>
							</div>

							<div class="form-group">
							<label for="inputData" for="special-requests">Special Requests:</label>	
							<textarea name="special-requests" id="special-requests" rows="10" cols="30"></textarea>
							</div>

							<div class="errorMessage"></div>
							
							<button type="submit" class="btn btn-default">Submit</button>
			        	</form>
						
    <!-- Div to display the generated QR code -->
    <div id="qrcode" class="d-flex justify-content-center mb-3"></div>
    <button id="downloadBtn" class="btn btn-success d-none">Download QR Code</button>
  </div>
			        </article>	
	        	</div>
	        </div>	       	    
	    </div><!-- ends row -->
	<footer class="footer navbar-fixed-bottom">
		<ul>
			<li><a href="social.html">Social</a></li> 
			<li><a href="contact.html">Contact Us</a></li>
			<li><a href="directions.html">Directions</a></li>
			<li><a href="Reservations.html">Reservations</a></li>
		</ul>
	</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="wild.js">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Bootstrap 5 JS and Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <script>
	// JavaScript to handle form submission and generate QR code
	document.getElementById('qrForm').addEventListener('submit', function(event) {
	  event.preventDefault();  // Prevent the form from submitting normally
  
	  // Collect form input values
	  const firstName = document.getElementById('fname').value;
	  const lastName = document.getElementById('lname').value;
	  const phone = document.getElementById('phone').value;
	  const month = document.getElementById('reserveMo').value;
	  const day = document.getElementById('reserveDy').value;
	  const year = document.getElementById('reserveYr').value;
	  const occasion = document.getElementById('occasion').value;
	  const partySize = document.getElementById('party-size').value;
	  const specialRequests = document.getElementById('special-requests').value;
  
	  // Format the data into a single string
	  const qrData = `Reservation Details:\nName: ${firstName} ${lastName}\nPhone: ${phone}\nDate: ${day}/${month}/${year}\nOccasion: ${occasion}\nParty Size: ${partySize}\nSpecial Requests: ${specialRequests}`;
  
	  // Generate QR code if data is present
	  if (qrData.trim() !== '') {
		// Clear any existing QR code
	
		document.getElementById('qrcode').innerHTML = '';
  
		// Generate a new QR code
		QRCode.toCanvas(document.createElement('canvas'), qrData, { width: 200, height: 200 }, function(error, canvas) {
		  if (error) {
			console.error(error);
		  } else {
			document.getElementById('qrcode').appendChild(canvas);  // Append the canvas to the div
			document.getElementById('downloadBtn').classList.remove('d-none');  // Show download button
  
			// Prepare download function for the generated QR code
			document.getElementById('downloadBtn').onclick = function() {
			  const link = document.createElement('a');
			  link.download = 'reservation_qrcode.png';
			  link.href = canvas.toDataURL();
			  link.click();
			};
		  }
		});
	  } else {
		alert('Please complete the form to generate a QR code.');
	  }
	});
  </script>  
  </script>
 </body>
</html>